<?xml version="1.0"?>
<odoo>
    <data>
        <record id="view_gduacceso_escaner_form" model="ir.ui.view">
            <field name="name">view.gdu.acceso.escaner.form</field>
            <field name="model">gdu.acceso.escaner</field>
            <field name="arch" type="xml">
                <button name="f_search" string="BuscarA" class="oe_highlight" type="object"/>
                <form string="Código de barras" create="false" edit="false">
                    <group>
                        <field name="cod_barras" force_save="0"/>
                    </group>

                </form>

                <div>
                    <div class="o_kanban_view o_modules_kanban o_kanban_ungrouped" id="cod_personcontent">
                        <div class="oe_module_vignette o_kanban_record" tabindex="0" role="article">
                            <div class="o_dropdown_kanban" tabindex="-1">
                                <a class="dropdown-toggle o-no-caret btn" data-toggle="dropdown" data-display="static" href="#" role="button" aria-label="Dropdown menu" title="Dropdown menu">
                                    <span class="fa fa-ellipsis-v"></span>
                                </a>
                                <div class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                    <a class="dropdown-item oe_kanban_action oe_kanban_action_a" data-type="edit" href="#">Module Info</a>
                                    <a role="menuitem" class="dropdown-item" href="http://www.uo.edu.cu" target="_blank">Learn More</a>
                                    <a role="menuitem" class="dropdown-item oe_kanban_action oe_kanban_action_a" data-name="button_immediate_upgrade" data-type="object" href="#">Upgrade</a>
                                    <a role="menuitem" class="dropdown-item oe_kanban_action oe_kanban_action_a" data-name="button_uninstall_wizard" data-type="object" href="#">Uninstall</a>
                                </div>
                            </div>
                            <img src="/gdu_base/static/avatar.png" class="oe_module_icon" alt="Icon"></img>
                            <div class="o_horizontal_separator"><field name="tipo_persona"/></div>
                            <div class="oe_module_desc" title="gdu_acceso">
                                <h3 class="o_kanban_record_title">
                                    <field name="tipo_persona"/>
                                </h3>
                                <field name="html"/>
                                <p class="oe_module_name">
                                    <field name="nombre"/>
                                </p>
                                <div class="oe_module_action">
                                    <a href="http://www.uo.edu.cu" target="_blank" class="btn btn-sm btn-secondary float-right" role="button" >Learn More</a>
                                    <div class="text-muted float-left">Installed</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <xpath expr="//input[@name='cod_barras']" position="before">
                    <i class="fa fa-barcode fa-5x"></i>
                </xpath>
                <xpath expr="//field[@name='cod_barras']" position="attributes">
                    <attribute name="size">11</attribute>
                    <attribute name="maxlength">11</attribute>
                </xpath>
                <xpath expr="//div[hasclass('o_list_view')]" position='before'>
                    <button class="btn-sm btn-link mb4 fa fa-search"
                            aria-label="Llamar"
                            title="Llamar"
                            style="font-size: 15px;"
                    />
                </xpath>
                <xpath expr="//div[hasclass('o_form_nosheet')]" position="after">
                    <br/>
                    <br/>
                    <span></span>
                    <span></span>
                </xpath>
                <button brand_icon="fa-amazon-pay" string=" fa-amazon-pay"/>

                <button brand_icon="fas fa-hand-sparkles" string=" fas fa-hand-sparkles"/>

                <button brand_icon="fas fa-handshake-slash" string=" fas fa-handshake-slash"/>
                <xpath expr="//div[hasclass('o_form_nosheet')]" position="inside">
                    <script>
                        console.log(1);
                        function limpia() {
                        let codbarras;
                            try{
                                codbarras = document.getElementsByName("cod_barras")[0].value.length;
                            } catch {
                                codbarras = 0;
                            }
                            try{
                                if (codbarras){
                                    let el = document.querySelector( ':focus' );
                                    if( el )
                                        el.blur();
                                }else{
                                    document.getElementsByName("cod_barras")[0].focus();
                                }
                            }catch {

                            }
                        }
                        try {
                             if(!nIntervId) var nIntervId=setInterval(limpia,1000);
                        } catch {
                          clearInterval( nIntervId );
                        }
                        //setInterval(limpia,1000);
                    </script>
                </xpath>
            </field>
        </record>
        <record id="view_gduacceso_escaner_tree" model="ir.ui.view">
            <field name="name">view.gdu.acceso.escaner.tree</field>
            <field name="model">gdu.acceso.escaner</field>
            <field name="arch" type="xml">

                <tree string="Código de barras">
                    <field name="cod_barras"/>
                </tree>
                <!--<button name="f_search" string="Buscar" class="oe_highlight" type="object"/>-->

            </field>
        </record>
        <record id="action_gduacceso_escaner_view" model="ir.actions.act_window">
            <field name="name">Código de barras</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">gdu.acceso.escaner</field>
            <field name="target">inline</field>
            <field name="view_mode">form,tree</field>
        </record>
    </data>
</odoo>